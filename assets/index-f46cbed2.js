import{r as u,a as q,d as x,L as R,N as f,O as A,u as N,A as F,b as B,c as U,R as H}from"./vendor-fcb1d9c0.js";import{Q as K,u as O,a as G}from"./@tanstack/react-query-1f6ac2c2.js";import{R as W}from"./@tanstack/react-query-devtools-ce91d256.js";import{c as _,u as L,f as v,g as S,a as Y,b as M,d as J}from"./@tanstack/react-table-0149be2d.js";import{r as E}from"./@tanstack/match-sorter-utils-120d5a33.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();var h={},X={get exports(){return h},set exports(t){h=t}},g={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z=u,ee=Symbol.for("react.element"),te=Symbol.for("react.fragment"),re=Object.prototype.hasOwnProperty,ne=Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,oe={key:!0,ref:!0,__self:!0,__source:!0};function D(t,r,s){var a,n={},o=null,c=null;s!==void 0&&(o=""+s),r.key!==void 0&&(o=""+r.key),r.ref!==void 0&&(c=r.ref);for(a in r)re.call(r,a)&&!oe.hasOwnProperty(a)&&(n[a]=r[a]);if(t&&t.defaultProps)for(a in r=t.defaultProps,r)n[a]===void 0&&(n[a]=r[a]);return{$$typeof:ee,type:t,key:o,ref:c,props:n,_owner:ne.current}}g.Fragment=te;g.jsx=D;g.jsxs=D;(function(t){t.exports=g})(X);const m=h.Fragment,e=h.jsx,i=h.jsxs;var C={},P=q;C.createRoot=P.createRoot,C.hydrateRoot=P.hydrateRoot;const w=new K({defaultOptions:{queries:{staleTime:1e3*10}}}),ae=async t=>(await(await fetch(`https://restcountries.com/v3.1/region/${t}?fields=name`)).json()).map(({name:a})=>a),ie=async t=>await(await fetch(`http://universities.hipolabs.com/search?country=${t}`)).json(),I=t=>({queryKey:["countries",t],queryFn:async()=>await ae(t||"asia"),options:{staleTime:1e4}}),k=t=>({queryKey:["country-details",t],queryFn:async()=>await ie(t||""),options:{staleTime:1e4}});async function se(){return x({countriesName:w.fetchQuery(I("asia"))})}async function le({params:t}){return x({universities:w.fetchQuery(k(t.id))})}const ce=()=>i(m,{children:[e("header",{children:i("nav",{children:[e(R,{to:"/",children:e("h2",{children:"University finder"})}),i("ul",{children:[e("li",{children:e(f,{to:"/",children:"Countries"})}),e("li",{children:e(f,{to:"/blog",children:"Blog"})}),e("li",{children:e(f,{to:"/profile",children:"Profile"})})]})]})}),e("main",{children:e(A,{})}),e("footer",{children:i("span",{children:["Â© Kiran ",new Date().getFullYear()]})})]}),j=()=>e("div",{className:"loading-container",children:e("div",{className:"loader",children:"Loading..."})}),V=({table:t})=>i("div",{className:"pagination",children:[e("button",{onClick:()=>t.setPageIndex(0),disabled:!t.getCanPreviousPage(),children:"<<"}),e("button",{onClick:()=>t.previousPage(),disabled:!t.getCanPreviousPage(),children:"<"}),e("button",{onClick:()=>t.nextPage(),disabled:!t.getCanNextPage(),children:">"}),e("button",{onClick:()=>t.setPageIndex(t.getPageCount()-1),disabled:!t.getCanNextPage(),children:">>"})]}),y=_(),b=(t,r,s,a)=>{const n=E(t.getValue(r),s);return a({itemRank:n}),n.passed},de=[y.accessor("common",{cell:t=>t.getValue(),header:()=>e("span",{children:"Common Name"}),size:140}),y.accessor(t=>t.official,{id:"official",header:()=>e("span",{children:"Official Name"})}),y.accessor(t=>t.common,{id:"action",cell:t=>e(R,{to:`/${t.getValue()}`,children:"Visit"}),header:()=>e("span",{children:"Action"}),size:80})],ue=()=>{const[t,r]=u.useState(localStorage.getItem("country")||""),[s,a]=u.useState(localStorage.getItem("continent")||"asia"),{data:n}=O(I(s)),o=L({data:n||[],columns:de,filterFns:{fuzzy:b},state:{globalFilter:t},onGlobalFilterChange:r,globalFilterFn:b,getCoreRowModel:S(),getFilteredRowModel:Y(),getPaginationRowModel:M(),getFacetedRowModel:J()}),c=u.useMemo(()=>[...o.getHeaderGroups()].pop(),[]);return i("div",{children:[i("div",{className:"search-section",children:[e("input",{type:"text",value:t??"",onChange:l=>{r(l.target.value),localStorage.setItem("country",l.target.value)},placeholder:"Search all columns..."}),i("select",{name:"continent",value:s,onChange:l=>{a(l.target.value),localStorage.setItem("continent",l.target.value)},children:[e("option",{value:"asia",children:"Asia"}),e("option",{value:"europe",children:"Europe"})]})]}),i("table",{children:[e("colgroup",{children:c==null?void 0:c.headers.map(({getSize:l,id:d})=>e("col",{width:l()===150?"":l()},d))}),e("thead",{children:o.getHeaderGroups().map(({headers:l,id:d})=>e("tr",{children:l.map(({column:Q,getContext:z,id:$,isPlaceholder:T})=>e("th",{children:T?null:v(Q.columnDef.header,z())},$))},d))}),e("tbody",{children:o.getRowModel().rows.length?o.getRowModel().rows.map(l=>e("tr",{children:l.getVisibleCells().map(d=>e("td",{children:v(d.column.columnDef.cell,d.getContext())},d.id))},l.id)):e("tr",{className:"error-row",children:e("td",{children:i("span",{children:[e("strong",{children:"Error 404: "})," No record found! Please try searching with other names"]})})})}),e("tfoot",{children:i("tr",{children:[e("td",{children:i("span",{children:["Page"," ",i("strong",{children:[o.getState().pagination.pageIndex+1," of"," ",o.getPageCount()]})]})}),e("td",{}),e("td",{children:e(V,{table:o})})]})})]})]})},he=()=>{const t=N();return e(m,{children:e(u.Suspense,{fallback:e(j,{}),children:e(F,{resolve:t.countriesName,errorElement:e("div",{children:"Oops!"}),children:e(ue,{})})})})},pe=(t,r,s,a)=>{const n=E(t.getValue(r),s);return a({itemRank:n}),n.passed},p=_(),ge=[p.accessor("name",{id:"Name",cell:t=>t.getValue(),header:()=>e("span",{children:"University"})}),p.accessor(t=>t["state-province"],{id:"State",cell:t=>t.getValue()??e("i",{children:"Not available"}),header:()=>e("span",{children:"State"})}),p.accessor(t=>t.alpha_two_code,{id:"Country code",cell:t=>t.getValue(),header:()=>e("span",{children:"Country Code"})}),p.accessor("web_pages",{id:"Website",cell:t=>t.getValue().map(r=>e(R,{to:r,target:"_blank",rel:"noopener noreferrer",children:r},r)),header:()=>e("span",{children:"Province"})})],me=()=>{const{id:t}=B(),{data:r,isLoading:s}=O(k(t));if(r&&r.length===0)return i("p",{children:["No record found for ",t]});const a=L({data:r||[],columns:ge,getCoreRowModel:S(),getPaginationRowModel:M(),filterFns:{fuzzy:pe}});return i(m,{children:[e("ul",{children:a.getRowModel().rows.map(n=>e("li",{children:n.getVisibleCells().map(o=>i("p",{children:[i("strong",{children:[o.column.id,":"]})," ",v(o.column.columnDef.cell,o.getContext())]},o.id))},n.id))}),s?null:e(V,{table:a})]})},fe=()=>{const t=N();return e(m,{children:e(u.Suspense,{fallback:e(j,{}),children:e(F,{resolve:t.universities,errorElement:e("div",{children:"Oops!"}),children:e(me,{})})})})},ye=U([{path:"/",element:e(ce,{}),children:[{path:"/",element:e(he,{}),loader:se},{path:"/:id",element:e(fe,{}),loader:le},{path:"/blog",element:e("span",{children:"Blog page"})},{path:"/profile",element:e("span",{children:"Profile page"})}]}]);C.createRoot(document.getElementById("root")).render(e(u.StrictMode,{children:i(G,{client:w,children:[e(H,{router:ye}),e(W,{initialIsOpen:!1})]})}));
